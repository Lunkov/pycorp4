<script>
var w = $(window).width();
var h = $(window).height();
var scale = 1;

function zoomFrame(x) {
  $("#schemaiframe").width(w + "px");
  $("#schemaiframe").height(h + "px");
  if (x === -1) {
	scale = scale * 1.1;
	//w = w * 0.9;
	//h = h * 0.9;
	//w = w * 1.1;
	//h = h * 1.1;
	//$("#schemaiframe").width(w + "px");
	//$("#schemaiframe").height(h + "px")
  } else {
	scale = scale * 0.9;
	//w = w * 0.9;
	//h = h * 0.9;
	//w = w * 1.1;
	//h = h * 1.1;
	//$("#schemaiframe").width(w + "px");
	//$("#schemaiframe").height(h + "px")
  }
 $('#schemaiframe').css('-webkit-transform-origin', `0 0`);
 $('#schemaiframe').css('-moz-transform-scale-origin', `0 0`);
 $('#schemaiframe').css('transform-origin', `0 0`);
 $('#schemaiframe').css('zoom', `${scale}`);
 $('#schemaiframe').css('-webkit-transform', `scale(${scale})`);
 $('#schemaiframe').css('-moz-transform-scale', `scale(${scale})`);
 $('#schemaiframe').css('transform', `scale(${scale})`);
}

</script>



<div class="card shadow col-xl-12 col-md-8 mb-4">
	<div class="card-header py-3">
		<h3 class="m-0 font-weight-bold text-primary" id="schema{{ dia_id }}">Схема</h3>
	</div>
	<div class="card-body">
      <div class="card shadow mb-4">
		<nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">
		<button class="btn btn-outline-success" type="button" onclick="zoomFrame(1)"><i class="fas fa-search-minus fa-sm"></i></button>
		&nbsp;
		<button class="btn btn-outline-success" type="button" onclick="zoomFrame(-1)"><i class="fas fa-search-plus fa-sm"></i></button>
		&nbsp;
		<ul class="nav navbar-nav navbar-right">
			<li class="nav-item dropdown">
			<a class="nav-link dropdown-toggle navbar-light bg-light" role="button" id="dropdownDiaView" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="flag-icon flag-icon-us"> </span> View</a>
			<div class="dropdown-menu" aria-labelledby="dropdownDiaView">
				<a class="dropdown-item" onclick="window.open('/workspace/{{ wsname }}/dia?format=mmd&{{ dia_filter }}={{ dia_id }}')" formtarget="_blank">View MMD</a>
				<a class="dropdown-item" onclick="window.open('/workspace/{{ wsname }}/dia?format=html&{{ dia_filter }}={{ dia_id }}')" formtarget="_blank">View SVG</a>
				<a class="dropdown-item" onclick="window.open('/workspace/{{ wsname }}/dia?format=mmd.png&{{ dia_filter }}={{ dia_id }}')" formtarget="_blank">View PNG</a>
				{% if print_png %}
					<a class="dropdown-item" onclick="window.open('/workspace/{{ wsname }}/dia?format=dia.png&{{ dia_filter }}={{ dia_id }}')" formtarget="_blank">View Diagram.PNG</a>
				{% endif %}
			</div>
			</li>
		</ul>		
		</nav>
		<div id="iframe_container">
		 <iframe border=1 id="schemaiframe" class="" src="/workspace/{{ wsname }}/dia?{{ dia_filter }}={{ dia_id }}" title="{{ dia_name }}" allowfullscreen style="min-height: 800px; max-width: 100%; width: 100%; height: 100%;"></iframe> 
		</div>
	  </div>
   </div>
</div>

{% if print_png %}
<!-- div class="card shadow mb-4">
	<div class="card-header py-3">
		<h3 class="m-0 font-weight-bold text-primary" id="schema{{ dia_id }}_png">Схема PNG</h3>
	</div>
	<div class="card-body">
      <div class="card shadow mb-4">
		<div id="iframe_container">
		 <img border=0 src="/dia/{{ dia_path }}/{{ dia_id }}.dia.png" title="{{ dia_name }}" width=100%> 
		</div>
	  </div>
   </div>
</div -->
{% endif %}
